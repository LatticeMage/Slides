<svg id="mindmap"></svg>

<!-- Load the latest version of d3 library -->
<script src="https://unpkg.com/d3/dist/d3.min.js"></script>

<!-- Load the latest version of markmap library -->
<script src="https://unpkg.com/markmap-lib/dist/browser/index.min.js"></script>
<script src="https://unpkg.com/markmap-view/dist/index.min.js"></script>

<script>
  async function loadMarkdown() {
    try {
      const response = await fetch('./plan.mm.md');
      if (!response.ok) {
        throw new Error('Network response was not ok: ' + response.statusText);
      }
      const markdown = await response.text();

      const { Transformer, Markmap } = window.markmap;

      // Load necessary assets
      const transformer = new Transformer();
      const { root, features } = transformer.transform(markdown);
      const { styles, scripts } = transformer.getUsedAssets(features);

      if (styles) Markmap.loadCSS(styles);
      if (scripts) Markmap.loadJS(scripts, { getMarkmap: () => window.markmap });

      // Initialize the markmap
      Markmap.create("#mindmap", null, root);
    } catch (error) {
      console.error('There has been a problem with your fetch operation:', error);
    }
  }

  loadMarkdown();
</script>
